create table t_bullet(
	bullet_no number(2) not null, 
	bullet_name varchar2(20) not null,
	bullet_img_path varchar2(200) not null, 
	constraint pk_bullet primary key (bullet_no)
);

insert into t_bullet (bullet_no, bullet_name, bullet_img_path)
values (1, '1.png', '/img/bullet/1.png' );
insert into t_bullet (bullet_no, bullet_name, bullet_img_path)
values (2, '2.png', '/img/bullet/2.png' );
insert into t_bullet (bullet_no, bullet_name, bullet_img_path)
values (3, '3.png', '/img/bullet/3.png' );
insert into t_bullet (bullet_no, bullet_name, bullet_img_path)
values (4, '4.png', '/img/bullet/4.png' );
insert into t_bullet (bullet_no, bullet_name, bullet_img_path)
values (5, '5.png', '/img/bullet/5.png' );
insert into t_bullet (bullet_no, bullet_name, bullet_img_path)
values (6, '6.png', '/img/bullet/6.png' );
insert into t_bullet (bullet_no, bullet_name, bullet_img_path)
values (7, '7.png', '/img/bullet/7.png' );
insert into t_bullet (bullet_no, bullet_name, bullet_img_path)
values (8, '8.png', '/img/bullet/8.png' );
insert into t_bullet (bullet_no, bullet_name, bullet_img_path)
values (9, '9.png', '/img/bullet/9.png' );
insert into t_bullet (bullet_no, bullet_name, bullet_img_path)
values (10, '10.png', '/img/bullet/10.png' );


create table t_user(
	user_no number(6) not null, 
	id varchar2(50) not null,
	pass varchar2(16) not null,
   	nick_name varchar2(20) not null,
	auto_type char(1) default 'N',
	prof_img_path varchar2(200),
	corv_img_path varchar2(200),
	reg_date date,
	mod_date date,
	constraint pk_user primary key (user_no)
);

create sequence s_user_no

insert into t_user (user_no, id, pass, nick_name) 
values(s_user_no.nextVal, 'abc', '1234', '김신')

create table t_feed(
	feed_no number(6) not null,
    user_no number(6) not null,
    bullet_no number(2) not null,
    feed_type number(1) not null,
    feed_dday number(3), 
    start_date date,
    end_date date,
    feed_title varchar2(90) not null,
    feed_content varchar2(2000),    
    reg_date date default sysdate,
    mod_date date,
    delete_yn char(1) default 'N',
    alert_date date,
    alert_schedule number(1),-- 1:매일, 2:주간
    conf_yn char(1) default 'N',
    conf_img_path varchar2(100),
    hash_tag varchar2(2000),
    conf_content varchar2(2000),
    constraint pk_feed primary key (feed_no),
    foreign key(user_no) references t_user(user_no),
    foreign key(bullet_no) references t_bullet(bullet_no)   
);  

create sequence s_feed_no

insert into t_feed (feed_no, user_no, bullet_no, feed_type, feed_title)
values (s_feed_no.nextval, 1, 6, 1, '필라테스 수업' );

insert into t_feed (feed_no, user_no, bullet_no, feed_type, feed_title)
values (s_feed_no.nextval, 1, 3, 1, '정올 알고리즘 3문제' );

insert into t_feed (feed_no, user_no, bullet_no, feed_type, feed_title)
values (s_feed_no.nextval, 1, 8, 1, '인강 - git설치' );



create table t_feed_detail(
    detail_no number(6) not null,
    feed_no number(6) not null,
    user_no number(6) not null,
    days number(3) not null,
    percent number(3) default 0,
    constraint pk_detail_no primary key (detail_no),
    foreign key(feed_no) references t_feed(feed_no),   
    foreign key(user_no) references t_user(user_no)   
);

create sequence s_feed_no

insert into t_feed_detail()
values()

create table t_feed_comment(
	comment_no number(6) not null,
    feed_no number(6) not null,
    user_no number(6) not null,
    comments varchar2(100),
    constraint pk_comment_no primary key (comment_no),
    foreign key(feed_no) references t_feed(feed_no),
    foreign key(user_no) references t_user(user_no)
);

select * from t_user

select * from t_feed

alter table t_feed
rename column feed_d_day to feed_dday;

select * from t_feed

select * from user_sequences;


select f.feed_no,
    		   f.user_no,
    		   f.bullet_no,
    		   f.feed_type,
    		   f.feed_dday,
    		   f.start_date,
    		   f.end_date,
    	       f.feed_title, 
    	       f.delete_yn
    	  from t_feed f
    	 where f.start_date = sysdate
    	 order by f.feed_type desc, f.end_date asc