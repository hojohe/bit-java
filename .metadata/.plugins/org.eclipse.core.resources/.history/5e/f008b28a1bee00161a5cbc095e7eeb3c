<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.mlec.mini5.user.dao.UserDAO">

	<resultMap id="userMap" type="user">
		<result property="no" column="user_no"/>
		<result property="id" column="id"/>
		<result property="pass" column="pass"/>
		<result property="nickName" column="nick_name"/>
		<result property="autoType" column="auto_type"/>
		<result property="profImgPath" column="prof_img_path"/>
		<result property="covrImgPath" column="covr_img_path"/>
		<result property="regDate" column="reg_date"/>
		<result property="modDate" column="mod_date"/>
	</resultMap>

	<!--
		로그인하는 select
	 -->
	<select id="innerLogin" parameterType="user" resultMap="userMap">
		select id, pass
		  from t_user
		 where id = #{id}
		   and pass = #{pass}
	</select>
	<select id="innerLogin" parameterType="user" resultMap="userMap">
		select id, pass
		  from t_user
		 where id = #{id}
		   and pass = #{pass}
	</select>
	
	
	<!-- 
		회원가입 insert
	-->
	<insert id="insertUser" parameterType="user">
		insert into t_user(
			user_no,
			id,
			pass,
			nick_name
		)
		values(
			s_user_user_no.nextVal,
			#{id},
			#{pass},
			#{nickName}
			
		)
	</insert>
	
	
	<select id="selectUserIdList" parameterType="string" resultType="string">
		select id 
		  from t_user
		 where id = #{id}
	</select>
	
	<select id="selectUserPassList" parameterType="user" resultMap="userMap">
		select id,
			   pass
		  from t_user
		 where id = #{id}
		   	 and pass = #{pass}
		
	</select>
	
	<update id="updateUserPass" parameterType="user">
		update t_user
		   set pass = #{newPass}
		 where id = #{id}
	</update>
	
	
	<!-- 회원정보 조회 -->
	<select id="selectProfile" parameterType="int" resultType="user">
		select no,
			   id,
			   pass,
			   nickName,
			   autoType,
			   profImgPath,
			   covrImgPath
		  from t_user
		  where no = #{no}
	</select>


	<!-- 회원정보 수정 -->
	<update id="updateProf" parameterType="string">
		update t_user
		   set prof_img_path,
		   		covr_img_path,
		   		pass
		 where id = #{id}
	</update>	




</mapper>