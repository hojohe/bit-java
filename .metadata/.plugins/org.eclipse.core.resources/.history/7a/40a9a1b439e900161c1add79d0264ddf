<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="kr.co.mini5.detail.dao.DetailDAO">

	<resultMap type="detail" id="detailMap">
		<result column="detail_no"	property="detailNo"	/>
		<result column="feed_no"	property="feedNo"	/>
		<result column="user_no"	property="userNo"	/>
		<result column="days"		property="percent"	/>
		<result column="percent"	property="percent"	/>
	</resultMap>
	
	<select id="selectDday" parameterType="detail" resultMap="detailMap">
		select feed_dday,
			   start_date,
			   end_date			   
		  from t_feed
		 where feed_no = #{feedNo}
		   and user_no = #{userNo}
	</select>

	<select id="selectDetail" parameterType="detail" resultMap="detailMap">
		select detail_no,
			   feed_no,
			   user_no,
			   days,
			   percent
		  from t_feed_detail
		 where feed_no = #{feedNo}
		   and user_no = #{userNo}
	</select>
	
	
	<resultMap id="feedMap" type="feed" >
		<result property="feedNo" column="feed_no"/>
		<result property="userNo" column="user_no"/>
		<result property="bulletNo" column="bullet_no"/>
		<result property="feedType" column="feed_type"/>
		<result property="feedDday" column="feed_dday"/>
		<result property="startDate" column="start_date"/>
		<result property="feedTitle" column="feed_title"/>
		<result property="deleteYn" column="delete_yn"/>
	</resultMap>
	
	
	<select id="selectDetail" parameterType="detail" resultMap="feedMap">
		select * from ( 
	 		select *
	   		  from t_feed
	  		 where user_no = 1
			order by reg_date desc
		)
		where rownum = 1
	</select>

</mapper>