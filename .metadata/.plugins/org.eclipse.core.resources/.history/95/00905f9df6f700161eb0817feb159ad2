package org.springframework.mvc;

import java.lang.reflect.Method;
import java.util.HashMap;
import java.util.Map;

public class URLHandlerMapping {

	private Map<String, CtrlAndMethod> mappings = new HashMap<>();

	public URLHandlerMapping(String ctrlNames) throws Exception {
		/*
		kr.co.mlec.board.controller.BoardController;
		kr.co.mlec.login.controller.LoginController;
		kr.co.mlec.main.controller.MainController;
		*/
		String[] arr = ctrlNames.split(";");
		for (String ctrlInfo: arr) {
			Class clz = Class.forName(ctrlInfo.trim());
			Object
			
			Method[] mArr = clz.getDeclaredMethods();
			
			for(Method m: mArr) {
				RequestMapping rm = m.getAnnotation(RequestMapping.class);
				if (rm == null) continue;
				
				mappings.put(rm.value(), (Controller)clz.newInstance());
			}
			
		}
	}
	
	public CtrlAndMethod getCtrlAndMethod(String url) {
		return mappings.get(url);
	}
}
